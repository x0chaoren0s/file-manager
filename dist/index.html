<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>æ–‡ä»¶ç®¡ç†å™¨</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='2' y1='2' x2='22' y2='22' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0%25' stop-color='%234facfe'/%3E%3Cstop offset='100%25' stop-color='%2300f2fe'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23g)' d='M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6 10H6v-2h8v2zm4-4H6v-2h12v2z' opacity='.9'/%3E%3C/svg%3E">
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function X(e){return!e||e==="/"?"/":e.endsWith("/")?e:e+"/"}const a={currentPathname:window.location.pathname,basePath:X(window.location.pathname),origin:window.location.origin,items:[],webdavCapable:!0,isDav:!1,supportsPut:!1,supportsMove:!1,supportsDelete:!1,supportsMkcol:!1,supportsCopy:!1,selectedItems:new Set,clipboard:{mode:null,items:new Set}};function B(e){return String(e).replace(/[&<>"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"})[t])}function D(e){if(e==null||isNaN(e))return"-";const t=["B","KB","MB","GB","TB"];let n=0,s=Number(e);for(;s>=1024&&n<t.length-1;)s/=1024,n++;return s.toFixed(s<10&&n>0?2:0)+" "+t[n]}function se(e){if(!e)return"-";const t=new Date(e);if(String(t)==="Invalid Date")return"-";const n=s=>String(s).padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())} ${n(t.getHours())}:${n(t.getMinutes())}`}function M(e,t){return e.endsWith("/")||(e+="/"),e+t}function O(e){return e.split("/").map(t=>encodeURIComponent(t)).join("/").replace(/%2F/gi,"/")}function V(e,t){try{return new URL(e,t).pathname}catch{return e}}function oe(e){const t=String(e||"").toLowerCase();return!!([".txt",".log",".sh",".py",".md",".html",".htm",".css",".js",".json",".jsx",".ts",".tsx",".go",".c",".cpp",".h",".php",".sql",".yaml",".yml",".xml",".rs",".java",".kt",".swift",".rb",".lua",".pl"].some(s=>t.endsWith(s))||/\.(png|jpe?g|gif|svg|bmp|webp)$/.test(t)||/\.(mp4|webm|ogg|mov)$/.test(t))}function re(e){const t=String(e||"").toLowerCase();return/\.(png|jpe?g|gif|svg|bmp|webp)$/.test(t)}function ie(e){const t=String(e||"").toLowerCase();return/\.(mp4|webm|ogg|mov)$/.test(t)}function ae(e,t){const n=e.endsWith("/")?e:e+"/",s=t.endsWith("/")?t:t+"/";return n===s}function ce(e){const t=String(e||"").toLowerCase();return t.match(/\.(png|jpe?g|gif|svg|bmp|webp)$/)?"å›¾ç‰‡":t.match(/\.(mp4|webm|ogg|mov|avi|mkv|flv)$/)?"è§†é¢‘":t.match(/\.(mp3|wav|flac|aac|m4a|ogg)$/)?"éŸ³é¢‘":t.match(/\.(html|htm|css|js|json|jsx|ts|tsx|py|sh|go|c|cpp|h|php|sql|yaml|yml|xml)$/)?"ä»£ç ":t.match(/\.(md|markdown|txt|log|pdf|doc|docx|xls|xlsx|ppt|pptx|rtf|epub)$/)?"æ–‡æ¡£":t.match(/\.(zip|rar|7z|tar|gz|bz2|xz)$/)?"å‹ç¼©åŒ…":t.match(/\.(exe|msi|deb|rpm|dmg|apk)$/)?"ç¨‹åº":"æ–‡ä»¶"}const m={path:document.getElementById("current-path"),status:document.getElementById("status"),tbody:document.getElementById("file-tbody"),refreshBtn:document.getElementById("refresh-btn"),fileInput:document.getElementById("file-input"),dropzone:document.getElementById("upload-zone"),selectAll:document.getElementById("select-all"),selectionBar:document.getElementById("selection-bar"),selectedCount:document.getElementById("selected-count"),newDirBtn:document.getElementById("new-dir-btn"),batchCutBtn:document.getElementById("batch-cut-btn"),batchCopyBtn:document.getElementById("batch-copy-btn"),batchDeleteBtn:document.getElementById("batch-delete-btn"),pasteBtn:document.getElementById("paste-btn")};function g(e,t="info"){if(!e){m.status.textContent="";return}const n=t==="error"?"é”™è¯¯ï¼š":t==="success"?"å®Œæˆï¼š":"";m.status.textContent=n+e}function S(){const e=a.selectedItems.size,t=a.clipboard.items.size>0;e>0||t?(m.selectionBar.classList.add("active"),m.selectedCount.textContent=e>0?`å·²é€‰æ‹© ${e} é¡¹`:"",m.batchCutBtn.style.display=e>0?"inline-flex":"none",m.batchCopyBtn.style.display=e>0?"inline-flex":"none",m.batchDeleteBtn.style.display=e>0?"inline-flex":"none",m.pasteBtn.style.display=t?"inline-flex":"none"):m.selectionBar.classList.remove("active")}function G(e){const t=a.basePath.split("/").filter(Boolean);m.path.innerHTML="";const n=document.createElement("a");n.href="/",n.innerHTML='<span title="æ ¹ç›®å½•">ğŸ </span>',n.onclick=o=>{o.preventDefault(),e("/")},m.path.appendChild(n);let s="";for(let o=0;o<t.length;o++){s+="/"+t[o];const r=decodeURIComponent(t[o]),i=s+"/",p=document.createElement("span");p.className="muted",p.style.margin="0 4px",p.textContent="/",m.path.appendChild(p);const l=document.createElement("a");l.href=i,l.textContent=B(r);const c=i;l.onclick=u=>{u.preventDefault(),e(c)},m.path.appendChild(l)}}function k(e){if(!a.items.length){m.tbody.innerHTML='<tr><td colspan="5" class="muted">ç©ºç›®å½•</td></tr>';return}const t=a.items.map(n=>{const s=n.href,o=a.selectedItems.has(s),r=a.clipboard.mode==="move"&&a.clipboard.items.has(s),i=n.isDir?"ç›®å½•":ce(n.name),p=n.isDir?`<span class="tag">${i}</span><a href="${s}" class="dir-link">${B(n.name)}/</a>`:`<span class="tag">${i}</span><a href="${s}" download>${B(n.name)}</a>`,l=n.isDir?"-":n.size!=null?D(n.size):n.sizeRaw||"-",c=n.mtime?se(n.mtime):n.mtimeRaw||"-",u=[];n.isDir?u.push(`<button class="btn action-enter" data-href="${s}">æ‰“å¼€</button>`):(oe(n.name)&&u.push(`<button class="btn action-view" data-href="${s}" data-name="${B(n.name)}">æŸ¥çœ‹</button>`),u.push(`<a class="btn" href="${s}" download>ä¸‹è½½</a>`)),a.supportsMove&&u.push(`<button class="btn action-rename" data-href="${s}">é‡å‘½å</button>`),a.supportsDelete&&u.push(`<button class="btn danger action-delete" data-href="${s}">åˆ é™¤</button>`);const d=u.join(" ");return`<tr class="${o?"selected":""} ${r?"is-cut":""}">
      <td class="checkbox-cell"><input type="checkbox" class="row-checkbox" data-href="${s}" ${o?"checked":""}></td>
      <td>
        <div class="name">${p}</div>
        <div class="mobile-only">
          <div><span>${l}</span><span style="margin:0 6px;">â€¢</span><span>${c}</span></div>
          <div class="mobile-actions">${d}</div>
        </div>
      </td>
      <td class="nowrap desktop-only">${l}</td>
      <td class="nowrap desktop-only">${c}</td>
      <td class="desktop-only"><div class="actions">${d}</div></td>
    </tr>`}).join("");m.tbody.innerHTML=t,m.tbody.querySelectorAll(".dir-link").forEach(n=>{n.onclick=s=>{s.preventDefault(),e.onNavigate(n.getAttribute("href"))}}),m.tbody.querySelectorAll(".row-checkbox").forEach(n=>{n.onchange=()=>{const s=n.getAttribute("data-href");n.checked?a.selectedItems.add(s):a.selectedItems.delete(s),k(e),S()}}),m.tbody.querySelectorAll(".action-enter").forEach(n=>{n.onclick=()=>e.onNavigate(n.getAttribute("data-href"))}),m.tbody.querySelectorAll(".action-view").forEach(n=>{n.onclick=()=>e.onView(n.getAttribute("data-href"),n.getAttribute("data-name"))}),m.tbody.querySelectorAll(".action-rename").forEach(n=>{n.onclick=()=>e.onRename(n.getAttribute("data-href"))}),m.tbody.querySelectorAll(".action-delete").forEach(n=>{n.onclick=()=>e.onDelete(n.getAttribute("data-href"))})}function le(e){m.selectAll.onchange=()=>{m.selectAll.checked?a.items.forEach(t=>a.selectedItems.add(t.href)):a.selectedItems.clear(),k(e),S()},m.newDirBtn.onclick=()=>e.onCreateDir(),m.batchCutBtn.onclick=()=>{e.onBatchAction("move"),a.selectedItems.clear(),k(e),S()},m.batchCopyBtn.onclick=()=>{e.onBatchAction("copy"),a.selectedItems.clear(),k(e),S()},m.batchDeleteBtn.onclick=()=>e.onBatchDelete(),m.pasteBtn.onclick=()=>e.onPaste()}async function de(e){const t=e+(e.includes("?")?"&":"?")+"__list=1",n=await fetch(t,{method:"GET",credentials:"include"});if(!n.ok)throw new Error("JSON åˆ—è¡¨å¤±è´¥ï¼ŒHTTP "+n.status);const s=await n.json();return(Array.isArray(s.items)?s.items:[]).map(r=>({name:String(r.name||"").replace(/\/$/,""),isDir:!!r.isDir,size:r.size==null?null:Number(r.size),mtime:r.mtime?new Date(r.mtime*1e3).toUTCString():null,href:M(e,String(r.name||""))}))}async function ue(e,t){const s=await fetch(e,{method:"PROPFIND",headers:{Depth:"1","Content-Type":"text/xml; charset=utf-8"},body:`<?xml version="1.0" encoding="utf-8"?>
<d:propfind xmlns:d="DAV:">
  <d:prop>
    <d:displayname/>
    <d:getcontentlength/>
    <d:getlastmodified/>
    <d:resourcetype/>
  </d:prop>
</d:propfind>`,credentials:"include"});if(!s.ok)throw new Error("PROPFIND å¤±è´¥ï¼ŒHTTP "+s.status);const o=await s.text(),i=new DOMParser().parseFromString(o,"application/xml"),p=Array.from(i.getElementsByTagNameNS("*","response")),l=[];for(const c of p){const u=c.getElementsByTagNameNS("*","href")[0];if(!u)continue;const d=V(u.textContent||"",t);if(!d||ae(d,e))continue;const f=c.getElementsByTagNameNS("*","propstat")[0],h=f?f.getElementsByTagNameNS("*","prop")[0]:null,E=h&&h.getElementsByTagNameNS("*","displayname")[0]?.textContent||"",$=h&&h.getElementsByTagNameNS("*","getcontentlength")[0]?.textContent||"",I=h&&h.getElementsByTagNameNS("*","getlastmodified")[0]?.textContent||"",C=h?h.getElementsByTagNameNS("*","resourcetype")[0]:null,z=!!(C&&C.getElementsByTagNameNS("*","collection")[0]),ne=decodeURIComponent(E||d.split("/").filter(Boolean).pop()||"");l.push({name:ne,isDir:z||d.endsWith("/"),size:z?null:$?Number($):null,mtime:I||null,href:d})}return l.sort((c,u)=>c.isDir===u.isDir?c.name.localeCompare(u.name):c.isDir?-1:1)}async function me(e){const t=await fetch(e,{method:"GET",credentials:"include"});if(!t.ok)throw new Error("ç›®å½•è·å–å¤±è´¥ï¼ŒHTTP "+t.status);if(!(t.headers.get("Content-Type")||"").includes("text/html"))throw new Error("é HTML ç´¢å¼•ï¼Œæ— æ³•è§£æ");const s=await t.text(),o=new DOMParser().parseFromString(s,"text/html"),r=[],i=o.querySelector("table");if(i){const l=Array.from(i.querySelectorAll("tr"));for(let c=1;c<l.length;c++){const u=l[c].children;if(u.length<2)continue;const d=u[0].querySelector("a");if(!d)continue;const f=d.getAttribute("href")||"",h=(d.textContent||"").trim();if(!f||h===".."||f==="../")continue;const E=V(f.startsWith("http")?f:new URL(f,e).href,window.location.origin);if(!E.startsWith(e))continue;const $=decodeURIComponent(E.split("/").filter(Boolean).pop()||""),I=u[1]?.textContent?.trim()||null,C=u[2]?.textContent?.trim()||null,z=f.endsWith("/")||h.endsWith("/");r.push({name:$,isDir:z,size:null,sizeRaw:C&&C!=="-"?C:null,mtime:null,mtimeRaw:I&&I!=="-"?I:null,href:E})}}else{const l=Array.from(o.querySelectorAll("a"));for(const c of l){const u=(c.textContent||"").trim(),d=c.getAttribute("href")||"";if(!d||u===".."||d==="../")continue;const f=V(d.startsWith("http")?d:new URL(d,e).href,window.location.origin);if(!f.startsWith(e))continue;const h=decodeURIComponent(f.split("/").filter(Boolean).pop()||"");r.push({name:h,isDir:f.endsWith("/"),size:null,sizeRaw:null,mtime:null,mtimeRaw:null,href:f})}}const p=new Map(r.map(l=>[l.href,l]));return Array.from(p.values()).sort((l,c)=>l.isDir===c.isDir?l.name.localeCompare(c.name):l.isDir?-1:1)}async function pe(e){const t=await fetch(e,{method:"MKCOL",credentials:"include"});if(!t.ok)throw new Error("åˆ›å»ºç›®å½•å¤±è´¥ï¼ŒHTTP "+t.status);return!0}async function Q(e){const t=await fetch(e,{method:"DELETE",credentials:"include"});if(!t.ok)throw new Error("åˆ é™¤å¤±è´¥ï¼ŒHTTP "+t.status);return!0}async function Z(e,t,n=!1){const s=new URL(t,window.location.origin).href,o=await fetch(e,{method:n?"COPY":"MOVE",headers:{Destination:s,Overwrite:"F"},credentials:"include"});if(!o.ok)throw o.status===412?new Error("ç›®æ ‡å·²å­˜åœ¨"):new Error((n?"å¤åˆ¶":"ç§»åŠ¨")+"å¤±è´¥ï¼ŒHTTP "+o.status);return!0}async function he(e){try{const t=await fetch(e,{method:"OPTIONS",credentials:"include"}),n=(t.headers.get("Allow")||"").toUpperCase(),s=t.headers.get("DAV")||"";return{supportsPut:n.includes("PUT"),supportsMove:n.includes("MOVE"),supportsDelete:n.includes("DELETE"),supportsMkcol:n.includes("MKCOL"),supportsCopy:n.includes("COPY"),isWebDAV:s.includes("1")||s.includes("2")}}catch{return{supportsPut:!1,supportsMove:!1,supportsDelete:!1,supportsMkcol:!1,supportsCopy:!1,isWebDAV:!1}}}const K=document.getElementById("viewer-overlay"),y=document.getElementById("viewer-pre"),v=document.getElementById("viewer-html"),Y=document.getElementById("viewer-img-wrap"),fe=document.getElementById("viewer-img"),T=document.getElementById("viewer-video"),ge=document.getElementById("viewer-title"),U=document.getElementById("viewer-hint"),ye=document.getElementById("viewer-open-raw"),x=document.getElementById("viewer-toggle"),we=document.getElementById("viewer-close"),A=document.getElementById("viewer-word-wrap");we.onclick=()=>K.classList.add("hidden");window.addEventListener("keydown",e=>{e.key==="Escape"&&K.classList.add("hidden")});let H=!1,j="",J={},P=new Set;function be(e,t=""){const n=e.split(`
`),s={};if(t.toLowerCase().endsWith(".py"))for(let r=0;r<n.length;r++){const i=n[r];if(!i.trimEnd().endsWith(":"))continue;const l=i.length-i.trimStart().length;let c=r;for(let u=r+1;u<n.length;u++){const d=n[u];if(d.trim().length===0){c=u;continue}if(d.length-d.trimStart().length<=l)break;c=u}c>r&&(s[r]=c)}else{const r=[];for(let i=0;i<n.length;i++){const p=n[i];for(let l of p)if(l==="{")r.push(i);else if(l==="}"){const c=r.pop();c!==void 0&&i>c&&(s[c]||(s[c]=i))}}}return s}A.onclick=()=>{H=!H,A.classList.toggle("active",H),y.classList.toggle("wrap",H)};function L(e=!1){y.style.padding="0";let t="";if(e&&window.hljs)try{t=window.hljs.highlightAuto(j).value}catch{t=B(j)}else t=B(j);const n=t.split(`
`);let s="";for(let o=0;o<n.length;o++){const r=J[o]!==void 0,i=P.has(o),p=["ln-row",i?"folded":""].join(" ").trim(),l=r?`<span class="ln-fold" data-line="${o}"></span>`:"",c=`<span class="ln-num" data-num="${o+1}">${l}</span>`;let u=n[o]||" ";i&&(u+=`<span class="folded-ellipsis" data-line="${o}">...</span>`),s+=`<div class="${p}">${c}<span class="ln-content">${u}</span></div>`,i&&(o=J[o])}y.innerHTML=s,y.querySelectorAll("[data-line]").forEach(o=>{o.onclick=r=>{r.stopPropagation();const i=parseInt(o.dataset.line);P.has(i)?P.delete(i):P.add(i),L(e)}})}const F=512*1024;async function ve(e,t){ge.textContent=t,ye.setAttribute("href",e),y.textContent="åŠ è½½ä¸­...",v.style.display="none",Y.style.display="none",T.style.display="none",T.pause(),T.src="",y.style.display="block",x.classList.add("hidden"),U.textContent="",K.classList.remove("hidden");try{let n=null;try{const i=await fetch(e,{method:"HEAD",credentials:"include"});if(i.ok){const p=i.headers.get("Content-Length");p&&(n=Number(p))}}catch{}let s,o=!1;if(n!=null&&n>F?(s=await fetch(e,{method:"GET",headers:{Range:`bytes=0-${F-1}`},credentials:"include"}),o=!0):s=await fetch(e,{method:"GET",credentials:"include"}),!s.ok)throw new Error(`HTTP ${s.status}`);if(re(t)){fe.src=e,Y.style.display="block",y.style.display="none",A.classList.add("hidden");return}if(ie(t)){T.src=e,T.style.display="block",y.style.display="none",A.classList.add("hidden"),U.textContent="æç¤ºï¼šè§†é¢‘åŠ è½½å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´";return}A.classList.remove("hidden");const r=await s.text();if(j=r,P.clear(),J=be(r,t),t.toLowerCase().endsWith(".md")){L(),await Ce(2e3);const i=!!(window.marked&&window.DOMPurify);try{const p=i?xe(r):_(r);v.innerHTML=p,Ie(v,e)}catch{v.innerHTML=_(r)}if(v.style.display="block",y.style.display="none",x.textContent="æºç ",x.classList.remove("hidden"),x.onclick=()=>{v.style.display!=="none"?(v.style.display="none",y.style.display="block",x.textContent="æ¸²æŸ“",L()):(v.style.display="block",y.style.display="none",x.textContent="æºç ")},window.MathJax&&window.MathJax.typesetPromise)try{await window.MathJax.typesetPromise([v])}catch{}}else!t.toLowerCase().endsWith(".txt")&&!t.toLowerCase().endsWith(".log")?(await $e(2e3),L(!0)):L(!1);o&&(U.textContent=`ä»…é¢„è§ˆå‰ ${Math.round(F/1024)}KBï¼Œç‚¹å‡»â€œä¸‹è½½â€æŸ¥çœ‹å®Œæ•´å†…å®¹ã€‚`)}catch(n){y.textContent=`åŠ è½½å¤±è´¥ï¼š${n&&n.message?n.message:String(n)}`}}let N=null;function Ee(){return N||(N=new Promise(async e=>{try{const t=[];if(window.hljs||t.push(W("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js")),!document.querySelector('link[href*="highlight.js"]')){const n=document.createElement("link");n.rel="stylesheet",n.href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css",document.head.appendChild(n)}await Promise.all(t)}catch{}e()}),N)}function $e(e){return Promise.race([Ee(),new Promise(t=>setTimeout(t,e))])}let R=null;function Be(){return R||(R=new Promise(async e=>{try{const t=[];window.marked||t.push(W("https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js")),window.DOMPurify||t.push(W("https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js")),window.MathJax||(window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},t.push(W("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"))),await Promise.all(t)}catch{}e()}),R)}function Ce(e){return Promise.race([Be(),new Promise(t=>setTimeout(t,e))])}function W(e){return new Promise((t,n)=>{const s=document.createElement("script");s.src=e,s.async=!0,s.onload=()=>t(),s.onerror=()=>n(new Error("load failed: "+e)),document.head.appendChild(s)})}function xe(e){try{const t={gfm:!0,breaks:!0,mangle:!1,headerIds:!0},n=window.marked.parse(e,t);return window.DOMPurify.sanitize(n,{USE_PROFILES:{html:!0}})}catch{return _(e)}}function Ie(e,t){const n=new URL(t,window.location.origin);e.querySelectorAll("a[href]").forEach(s=>{const o=s.getAttribute("href")||"";if(!(/^(?:[a-z]+:)?\/\//i.test(o)||o.startsWith("#")||o.startsWith("/")))try{s.href=new URL(o,n).href}catch{}}),e.querySelectorAll("img[src]").forEach(s=>{const o=s.getAttribute("src")||"";if(!(/^(?:[a-z]+:)?\/\//i.test(o)||o.startsWith("/")))try{s.src=new URL(o,n).href}catch{}})}function _(e){let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/```([\s\S]*?)```/g,(s,o)=>`<pre><code>${o.replace(/\n$/,"")}</code></pre>`),t=t.replace(/^######\s+(.*)$/gm,"<h6>$1</h6>").replace(/^#####\s+(.*)$/gm,"<h5>$1</h5>").replace(/^####\s+(.*)$/gm,"<h4>$1</h4>").replace(/^###\s+(.*)$/gm,"<h3>$1</h3>").replace(/^##\s+(.*)$/gm,"<h2>$1</h2>").replace(/^#\s+(.*)$/gm,"<h1>$1</h1>"),t=t.replace(/^(\s*)([-*])\s+(.*)$/gm,"$1<li>$3</li>"),t=t.replace(/(?:^(?:<li>.*<\/li>)(?:\n|$))+?/gm,s=>`<ul>${s.replace(/\n/g,"")}</ul>`),t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>"),t=t.replace(/`([^`]+)`/g,"<code>$1</code>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener">$1</a>'),t.split(/\n\n+/).map(s=>/^<h\d|^<pre|^<ul|^<li|^<blockquote/.test(s)?s:`<p>${s.replace(/\n/g,"<br/>")}</p>`).join(`
`)}const w={tbody:document.getElementById("file-tbody"),refreshBtn:document.getElementById("refresh-btn"),fileInput:document.getElementById("file-input"),dropzone:document.getElementById("upload-zone")},ee={onNavigate:q,onView:ve,onRename:Pe,onDelete:Le,onCreateDir:De,onBatchAction:Se,onBatchDelete:ke,onPaste:Ae};async function b(){g("æ­£åœ¨åŠ è½½åˆ—è¡¨..."),a.selectedItems.clear(),S();try{let e=[];try{e=await de(a.basePath),a.isDav=!1}catch{try{e=await ue(a.basePath,a.origin),a.isDav=!0}catch{a.isDav=!1,e=await me(a.basePath)}}a.items=e;const t=await he(a.basePath);Object.assign(a,t),a.isDav||await Te(a.items),k(ee),g(`å·²åŠ è½½ ${e.length} é¡¹`)}catch(e){console.error(e),g(String(e&&e.message||e),"error"),w.tbody.innerHTML='<tr><td colspan="5" class="muted">åŠ è½½å¤±è´¥</td></tr>'}}async function Te(e){const t=e.filter(n=>!n.isDir);await Promise.all(t.map(async n=>{try{const s=await fetch(n.href,{method:"HEAD",credentials:"include"});if(!s.ok)return;const o=s.headers.get("Content-Length"),r=s.headers.get("Last-Modified");o&&(n.size=Number(o)),r&&(n.mtime=r)}catch{}}))}function q(e){const t=new URL(e,a.origin),n=t.pathname.endsWith("/")?t.pathname:t.pathname+"/";a.currentPathname=n,a.basePath=n,history.pushState({path:n},"",n),G(q),b()}async function te(e){if(!e||!e.length)return;if(!a.supportsPut){g("æœåŠ¡ç«¯ä¸æ”¯æŒä¸Šä¼ ï¼ˆPUTï¼‰","error");return}const t=document.getElementById("upload-progress-container"),n=document.getElementById("upload-progress-bar"),s=document.getElementById("upload-filename"),o=document.getElementById("upload-speed"),r=document.getElementById("upload-size");t.classList.remove("hidden");for(const i of e){const p=M(a.basePath,i.name);s.textContent=i.name,n.style.width="0%";const l=D(i.size);r.textContent=`0B / ${l}`,g(`æ­£åœ¨ä¸Šä¼ ï¼š${i.name}`),await new Promise((c,u)=>{const d=new XMLHttpRequest,f=Date.now();d.upload.onprogress=h=>{if(h.lengthComputable&&h.total>0){const E=Math.round(h.loaded/h.total*100);n.style.width=E+"%",r.textContent=`${D(h.loaded)} / ${D(h.total)}`;const $=(Date.now()-f)/1e3;$>0&&(o.textContent=D(h.loaded/$)+"/s")}},d.onload=()=>d.status>=200&&d.status<300?c():u(new Error(`HTTP ${d.status}`)),d.onerror=()=>u(new Error("ç½‘ç»œé”™è¯¯")),d.open("PUT",O(p),!0),d.withCredentials=!0,d.setRequestHeader("Content-Type",i.type||"application/octet-stream"),d.setRequestHeader("Overwrite","T"),d.send(i)}).catch(c=>g(`ä¸Šä¼ å¤±è´¥ï¼š${i.name}ï¼ˆ${c.message}ï¼‰`,"error"))}setTimeout(()=>t.classList.add("hidden"),1e3),await b()}async function De(){const e=prompt("è¯·è¾“å…¥æ–°æ–‡ä»¶å¤¹åç§°:");if(e)try{const t=M(a.basePath,e)+"/";await pe(O(t)),g("æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ","success"),await b()}catch(t){g("åˆ›å»ºå¤±è´¥ï¼š"+t.message,"error")}}function Pe(e){const t=decodeURIComponent(e.split("/").filter(Boolean).pop()||""),n=Array.from(w.tbody.querySelectorAll(".row-checkbox")).find(l=>l.getAttribute("data-href")===e)?.closest("tr");if(!n)return;const s=n.children[1],o=e.endsWith("/"),r=document.createElement("div");r.className="inline-form",r.innerHTML=`
        <input type="text" value="${B(t)}" style="flex:1" />
        <button class="btn ok-btn">ç¡®å®š</button>
        <button class="btn cancel-btn">å–æ¶ˆ</button>
    `;const i=s.innerHTML;s.innerHTML="",s.appendChild(r);const p=r.querySelector("input");r.querySelector(".cancel-btn").onclick=()=>{s.innerHTML=i},r.querySelector(".ok-btn").onclick=async()=>{const l=p.value.trim();if(!l||l===t){s.innerHTML=i;return}try{const c=M(a.basePath,l)+(o?"/":"");await Z(e,O(c),!1),g("é‡å‘½åæˆåŠŸ","success"),await b()}catch(c){g("é‡å‘½åå¤±è´¥ï¼š"+c.message,"error"),s.innerHTML=i}},p.focus(),p.select()}async function Le(e){const t=decodeURIComponent(e.split("/").filter(Boolean).pop()||"");if(confirm(`ç¡®è®¤åˆ é™¤ï¼š${t} ï¼Ÿ`))try{await Q(e),g("åˆ é™¤æˆåŠŸ","success"),await b()}catch(n){g("åˆ é™¤å¤±è´¥ï¼š"+n.message,"error")}}function Se(e){a.clipboard.mode=e,a.clipboard.items=new Set(a.selectedItems),g(`å·²${e==="move"?"å‰ªåˆ‡":"å¤åˆ¶"} ${a.clipboard.items.size} é¡¹ï¼Œè¯·åˆ°ç›®æ ‡ç›®å½•ç²˜è´´`,"success")}async function ke(){const e=a.selectedItems.size;if(!e||!confirm(`ç¡®è®¤æ‰¹é‡åˆ é™¤å·²é€‰çš„ ${e} é¡¹å—ï¼Ÿ`))return;g(`æ­£åœ¨åˆ é™¤ ${e} é¡¹...`);let t=0;for(const n of a.selectedItems)try{await Q(n)}catch(s){t++,console.error(s)}g(t?`åˆ é™¤å®Œæˆï¼Œä½†æœ‰ ${t} é¡¹å¤±è´¥`:"æ‰¹é‡åˆ é™¤æˆåŠŸ",t?"error":"success"),a.selectedItems.clear(),await b()}async function Ae(){const{mode:e,items:t}=a.clipboard;if(!t.size)return;g(`æ­£åœ¨${e==="move"?"ç§»åŠ¨":"å¤åˆ¶"} ${t.size} é¡¹...`);let n=0;const s=e==="copy";for(const o of t)try{const r=decodeURIComponent(o.split("/").filter(Boolean).pop()||""),i=M(a.basePath,r)+(o.endsWith("/")?"/":"");await Z(o,O(i),s)}catch(r){n++,console.error(r)}e==="move"&&!n&&a.clipboard.items.clear(),g(n?`ç²˜è´´å®Œæˆï¼Œä½†æœ‰ ${n} é¡¹å¤±è´¥`:"æ“ä½œå…¨éƒ¨æˆåŠŸ",n?"error":"success"),await b()}le(ee);w.refreshBtn.onclick=b;w.fileInput.onchange=e=>te(e.target.files);w.dropzone.ondragover=e=>{e.preventDefault(),w.dropzone.classList.add("dragover")};w.dropzone.ondragleave=()=>w.dropzone.classList.remove("dragover");w.dropzone.ondrop=e=>{e.preventDefault(),w.dropzone.classList.remove("dragover"),te(e.dataTransfer?.files)};window.onpopstate=()=>{const e=X(location.pathname);a.currentPathname=e,a.basePath=e,G(q),b()};G(q);b();</script>
  <style rel="stylesheet" crossorigin>:root{--bg: #0b1020;--muted: #151b2f;--text: #e6edf3;--sub: #9fb0c3;--accent: #4aa3ff;--danger: #ff6b6b;--ok: #37d399;--warn: #fbbf24}html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,"Apple Color Emoji","Segoe UI Emoji"}a{color:var(--accent);text-decoration:none}a:hover{text-decoration:underline}.container{max-width:1100px;margin:0 auto;padding:24px}header{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:16px}header h1{font-size:18px;margin:0;font-weight:600}.path{color:var(--sub);word-break:break-all}.toolbar{display:flex;gap:8px;flex-wrap:wrap}button,.btn{background:var(--muted);color:var(--text);border:1px solid #25304a;border-radius:8px;padding:8px 12px;cursor:pointer}button:hover,.btn:hover{background:#1a2340}button.active,.btn.active{background:#1e3a75;border-color:var(--accent);color:var(--accent)}button.danger{border-color:#5c2b2b;color:#ffd4d4}button.danger:hover{background:#2a1717}.status{margin:12px 0;min-height:22px;color:var(--sub)}.panel{background:var(--muted);border:1px solid #25304a;border-radius:12px;overflow:hidden}.table{width:100%;border-collapse:collapse}.table thead th{text-align:left;padding:12px;background:#0f1527;color:var(--sub);font-weight:600;border-bottom:1px solid #25304a}.table tbody td{padding:12px;border-bottom:1px solid #25304a;vertical-align:middle}.name{display:flex;align-items:center;gap:8px}.tag{font-size:12px;color:#8fb3ff;background:#0b2a55;border:1px solid #1e3a75;padding:1px 6px;border-radius:999px}.actions{display:flex;gap:6px;flex-wrap:wrap}.nowrap{white-space:nowrap}.muted{color:var(--sub)}.dropzone{margin-top:16px;padding:18px;border:1px dashed #39507e;border-radius:12px;color:#b8c7da;text-align:center}.dropzone.dragover{background:#0f1527}input[type=text]{background:#0b1020;color:var(--text);border:1px solid #25304a;border-radius:6px;padding:6px 8px}input[type=file]{color:var(--text)}.inline-form{display:flex;gap:8px;align-items:center}.hint{color:#8aa0b9;font-size:12px}.hidden,.mobile-only{display:none}.md-body{color:var(--text)}.md-body h1,.md-body h2,.md-body h3,.md-body h4,.md-body h5,.md-body h6{margin:16px 0 8px}.md-body p{margin:10px 0}.md-body pre{background:#0b1020;border:1px solid #25304a;border-radius:8px;padding:12px;overflow:auto}.md-body code{background:#0f1527;border:1px solid #25304a;border-radius:6px;padding:1px 4px}.md-body pre code{background:transparent;border:none;padding:0}.md-body ul,.md-body ol{padding-left:22px}.md-body blockquote{border-left:3px solid #39507e;margin:8px 0;padding:4px 10px;color:#c9d6e2;background:#0f1527}.md-body table{width:100%;border-collapse:collapse;margin:10px 0}.md-body th,.md-body td{border:1px solid #25304a;padding:6px 10px;text-align:left}.md-body a{color:var(--accent)}#viewer-img-wrap{display:none;width:100%;height:100%;background:#0b1020;position:relative}#viewer-img-wrap img{position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;object-fit:contain}@media(max-width:640px){.container{padding:14px}header h1{font-size:16px}.toolbar{gap:6px}button,.btn{padding:9px 12px}.name a{font-size:16px}.tag{font-size:11px}.table thead{display:none}.desktop-only{display:none!important}.mobile-only{display:block!important;color:#9fb0c3;margin-top:4px;font-size:12px}.actions{gap:8px}.mobile-actions{display:flex;margin-top:8px;flex-wrap:wrap}}#viewer-overlay{display:flex}#viewer-overlay.hidden{display:none}.ln-row{display:flex;align-items:flex-start;line-height:1.6}.ln-num{width:3.5rem;flex-shrink:0;text-align:right;padding-right:12px;padding-top:2px;color:#4b5e7d;background:#090e1a;-webkit-user-select:none;user-select:none;border-right:1px solid #25304a;margin-right:12px;font-size:11px;position:relative}.ln-num:before{content:attr(data-num)}.ln-content{flex:1;white-space:pre;overflow-x:auto;padding-top:2px;padding-bottom:2px}#viewer-pre.wrap .ln-content{white-space:pre-wrap;word-break:break-all;overflow-x:hidden}.ln-row.no-num .ln-num{display:none}.ln-row.no-num .ln-content{padding-left:14px}.ln-fold{position:absolute;left:4px;top:0;width:20px;height:100%;cursor:pointer;color:#4b5e7d;font-size:9px;display:flex;align-items:center;justify-content:center;transition:transform .2s;-webkit-user-select:none;user-select:none;z-index:20}.ln-fold:before{content:"â–¶";display:inline-block;transform:rotate(90deg)}.ln-row.folded .ln-fold:before{transform:rotate(0)}.folded-ellipsis{background:#1a2340;color:#4aa3ff;padding:0 6px;border-radius:4px;font-size:11px;cursor:pointer;margin-left:8px;display:inline-block;line-height:1.2;font-weight:700}.folded-ellipsis:hover{background:#25304a}.selection-bar{display:flex;align-items:center;justify-content:space-between;background:#1e3a75d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--accent);padding:10px 16px;border-radius:12px;margin-top:12px;opacity:0;transform:translateY(20px);transition:all .3s cubic-bezier(.175,.885,.32,1.275);pointer-events:none;position:sticky;bottom:24px;z-index:100}.selection-bar.active{opacity:1;transform:translateY(0);pointer-events:auto}.checkbox-cell{width:32px;padding:0 0 0 12px!important}tr.selected{background:#4aa3ff1a}tr.is-cut{opacity:.5;filter:grayscale(.5)}input[type=checkbox]{cursor:pointer;width:16px;height:16px;accent-color:var(--accent)}button.primary{background:var(--accent);color:#fff;border:none}button.primary:hover{background:#3a8ee6}@media(max-width:640px){.selection-bar{flex-direction:column;gap:12px;align-items:flex-start;bottom:14px}.selection-bar div{width:100%;justify-content:space-between}}#viewer-overlay .md-body{-webkit-user-select:text;user-select:text}</style>
</head>

<body>
    <div class="container">
        <header>
            <h1>æ–‡ä»¶ç®¡ç†å™¨</h1>
            <div class="path" id="current-path"></div>
        </header>

        <div class="toolbar">
            <div style="display:flex; gap:8px; flex-wrap:wrap;">
                <button id="refresh-btn">åˆ·æ–°</button>
                <button id="new-dir-btn">æ–°å»ºæ–‡ä»¶å¤¹</button>
                <label class="btn" for="file-input">é€‰æ‹©æ–‡ä»¶ä¸Šä¼ </label>
                <input id="file-input" type="file" multiple class="hidden" />
            </div>
            <div id="selection-bar" class="selection-bar">
                <span id="selected-count" class="muted">å·²é€‰æ‹© 0 é¡¹</span>
                <div style="display:flex; gap:8px;">
                    <button id="batch-cut-btn" class="btn">å‰ªåˆ‡</button>
                    <button id="batch-copy-btn" class="btn">å¤åˆ¶</button>
                    <button id="batch-delete-btn" class="btn danger">åˆ é™¤</button>
                    <button id="paste-btn" class="btn primary" style="display:none;">ç²˜è´´åˆ°æ­¤å¤„</button>
                </div>
            </div>
        </div>
        <div class="status" id="status"></div>
        <div id="upload-progress-container" class="hidden" style="margin: 12px 0;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 4px; font-size: 12px;">
                <span id="upload-filename" class="sub"
                    style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">æ–‡ä»¶å</span>
                <div style="display: flex; gap: 12px; margin-left: 8px;">
                    <span id="upload-size" class="sub">0B / 0B</span>
                    <span id="upload-speed" class="sub">0 KB/s</span>
                </div>
            </div>
            <div
                style="height: 8px; background: #0f1527; border-radius: 4px; overflow: hidden; border: 1px solid #25304a;">
                <div id="upload-progress-bar"
                    style="width: 0%; height: 100%; background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%); transition: width 0.3s;">
                </div>
            </div>
        </div>

        <div class="panel">
            <table class="table" id="file-table">
                <thead>
                    <tr>
                        <th style="width: 32px; padding: 0 0 0 12px;"><input type="checkbox" id="select-all"></th>
                        <th>åç§°</th>
                        <th class="nowrap desktop-only">å¤§å°</th>
                        <th class="nowrap desktop-only">ä¿®æ”¹æ—¶é—´</th>
                        <th class="desktop-only">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="file-tbody">
                    <tr>
                        <td colspan="5" class="muted">åŠ è½½ä¸­...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="viewer-overlay" class="hidden"
            style="position:fixed; inset:0; background:rgba(0,0,0,0.55); align-items:center; justify-content:center; z-index:9999;">
            <div
                style="background:var(--muted); border:1px solid #25304a; border-radius:12px; width:min(1000px, 92vw); height:min(80vh, 800px); display:flex; flex-direction:column; overflow:hidden;">
                <div
                    style="display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:#0f1527; border-bottom:1px solid #25304a;">
                    <div id="viewer-title" class="muted"
                        style="white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"></div>
                    <div style="display:flex; gap:8px;">
                        <button id="viewer-toggle" class="btn hidden">æºç </button>
                        <button id="viewer-word-wrap" class="btn" title="å¼€å¯/å…³é—­è‡ªåŠ¨æ¢è¡Œ">æ¢è¡Œ</button>
                        <a id="viewer-open-raw" class="btn" target="_blank" rel="noopener" download>ä¸‹è½½</a>
                        <button id="viewer-close" class="btn">å…³é—­</button>
                    </div>
                </div>
                <div style="flex:1; overflow:auto; position:relative;">
                    <div id="viewer-img-wrap"><img id="viewer-img" alt="preview" /></div>
                    <video id="viewer-video" controls playsinline
                        style="display:none; width:100%; max-height:100%; background:#000;"></video>
                    <div id="viewer-html" class="md-body"
                        style="display:none; padding:14px; background:#0b1020; color:#e6edf3; line-height:1.6;"></div>
                    <pre id="viewer-pre"
                        style="margin:0; padding:0; background:#0b1020; color:#e6edf3; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size: 13px; line-height: 1.6; white-space: pre;">
                    </pre>
                </div>
                <div id="viewer-hint" class="hint" style="padding:8px 12px; border-top:1px solid #25304a;"></div>
            </div>
        </div>

        <div id="upload-zone" class="dropzone">
            æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ ï¼Œæˆ–ç‚¹å‡»ä¸Šæ–¹â€œé€‰æ‹©æ–‡ä»¶ä¸Šä¼ â€<br />
            <span class="hint">ä¸Šä¼ ä¼šä½¿ç”¨ HTTP PUT åˆ°å½“å‰ç›®å½•ï¼›å¦‚éœ€é‡åè¦†ç›–è¯·ç¡®è®¤æœåŠ¡ç«¯å…è®¸</span>
        </div>

        <p class="hint">è¯´æ˜ï¼šé¡µé¢ä¼˜å…ˆä½¿ç”¨ WebDAV æ–¹æ³•ï¼ˆPROPFIND/PUT/MOVE/DELETEï¼‰ã€‚è‹¥æœåŠ¡ç«¯æœªå¯ç”¨ WebDAVï¼Œå°†å°è¯•è§£æç›®å½•ç´¢å¼• HTML
            è·å–åˆ—è¡¨ï¼›ä½†é‡å‘½å/åˆ é™¤éœ€æœåŠ¡ç«¯æ”¯æŒç›¸åº”æ–¹æ³•ã€‚</p>
    </div>
</body>

</html>