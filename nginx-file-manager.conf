server {
    listen 8000;
    server_name localhost; # 或者您的域名

    # 文件管理器的 Web 根目录
    # 建议将构建出的 index.html 放在此目录下，数据文件也放在这里（或其子目录）
    root /var/www/html/file-manager;
    index index.html;

    # 允许管理的文件所在路径
    location / {
        # 启用目录索引（当 WebDAV PROPFIND 不可用时的备份方案）
        autoindex on;
        autoindex_exact_size off;
        autoindex_localtime on;
        autoindex_format html; # 您的前端逻辑支持解析 Nginx 默认的 HTML 索引

        # WebDAV 基本配置
        # 注意：原生 Nginx dav_module 仅支持 PUT, DELETE, MKCOL, COPY, MOVE
        # 不支持 PROPFIND 和 OPTIONS (需要 nginx-extras 里的 dav_ext 模块)
        dav_methods PUT DELETE MKCOL COPY MOVE;
        dav_ext_methods PROPFIND OPTIONS; # 如果您的 nginx 安装了 dav_ext 模块请开启
        
        # 权限控制
        create_full_put_path  on;
        dav_access            group:rw  all:r;

        # 解决跨域或方法限制（视情况开启）
        # add_header 'Access-Control-Allow-Origin' '*';
        # add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PROPFIND, PUT, DELETE, MOVE';

        # 限制上传大小
        client_max_body_size 1024m;

        # 安全建议：生产环境请务必开启认证
        # auth_basic "Restricted Files";
        # auth_basic_user_file /etc/nginx/.htpasswd;
    }
}
